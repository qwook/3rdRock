{"version":3,"sources":["../../src/EarthObject.js"],"names":[],"mappings":"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","file":"EarthObject.js","sourcesContent":["\nimport * as Loaders from './Loaders.js';\nimport Tweet from './Tweet.js';\nimport CurrentLocation from './CurrentLocation.js';\nimport * as CategoryColors from './CategoryColors.js';\n\nvar raycaster = new THREE.Raycaster();\n\nvar mouse = new THREE.Vector2();\n\ndocument.body.addEventListener( 'mousemove', onMouseMove, false );\ndocument.body.addEventListener( 'click', onClick, false );\n\nvar leftSide = document.getElementById(\"leftSide\");\nvar rightSide = document.getElementById(\"rightSide\");\nvar biggieSmalls = document.getElementById(\"biggieSmalls\");\nvar closeButton = document.getElementById(\"close\");\nvar misterWorldWide = document.getElementById(\"misterWorldWide\");\n\nvar onCanvas = false;\nfunction onMouseMove( event ) {\n\n  onCanvas = event.target.id == \"earth\";\n\n  // calculate mouse position in normalized device coordinates\n  // (-1 to +1) for both components\n\n  mouse.x = ( event.clientX / window.innerWidth ) * 2 - 1;\n  mouse.y = - ( event.clientY / window.innerHeight ) * 2 + 1;   \n\n  misterWorldWide.style.right = window.innerWidth-event.clientX + \"px\";\n  misterWorldWide.style.bottom = window.innerHeight-event.clientY+30 + \"px\";\n\n}\n\nvar lastClick = 0;\nfunction onClick( event ) {\n  if (event.target.id == \"earth\") {\n    var currentClick = (new Date()).getTime();\n\n    if (currentClick - lastClick < 250) {\n      earth.doubleClick(event);\n    }\n\n    lastClick = currentClick;\n  }\n}\n\n\nexport default class EarthObject extends THREE.Object3D {\n  constructor() {\n    super();\n\n\n    // Loaders.Texture('images/elev_bump_4k.jpg').generateMipmaps = true;\n\n    Promise.all([\n      Loaders.CacheTexture('/map/0/0'),\n      Loaders.CacheTexture('/map/1/0'),\n      Loaders.CacheTexture('/map/1/1'),\n      Loaders.CacheTexture('/map/0/1'),\n    ]).then((texture) => {\n\n      global.TwoDplane.material.map = Loaders.Texture('/map/0/0');\n      global.TwoDplane.scale.x = 0.5;\n      global.TwoDplane.scale.y = 0.5;\n      global.TwoDplane.position.x = -0.5;\n      global.TwoDplane.position.y = 0.5;\n\n      global.TwoDplane1.material.map = Loaders.Texture('/map/1/0');\n      global.TwoDplane1.scale.x = 0.5;\n      global.TwoDplane1.scale.y = 0.5;\n      global.TwoDplane1.position.x = -0.5;\n      global.TwoDplane1.position.y = -0.5;\n\n      global.TwoDplane2.material.map = Loaders.Texture('/map/0/1');\n      global.TwoDplane2.scale.x = 0.5;\n      global.TwoDplane2.scale.y = 0.5;\n      global.TwoDplane2.position.x = 0.5;\n      global.TwoDplane2.position.y = 0.5;\n\n      global.TwoDplane3.material.map = Loaders.Texture('/map/1/1');\n      global.TwoDplane3.scale.x = 0.5;\n      global.TwoDplane3.scale.y = 0.5;\n      global.TwoDplane3.position.x = 0.5;\n      global.TwoDplane3.position.y = -0.5;\n\n\n      // renderer.render(TwoDscene, TwoDcamera);\n      renderer.render(TwoDscene, TwoDcamera, this.renderTarget);\n      // renderer.render(TwoDscene, TwoDcamera);\n    })\n\n    this.renderTarget = new THREE.WebGLRenderTarget(1024*4, 1024*4);\n    // global.TwoDplane.material.map = Loaders.Texture('images/2_no_clouds_4k.jpg');\n    // renderer.render(TwoDscene, TwoDcamera, this.renderTarget);\n\n    this.globeMesh = new THREE.Mesh(\n      new THREE.SphereGeometry(10, 50, 50),\n      new THREE.MeshPhongMaterial({\n        // map: this.renderTarget,\n        map: Loaders.Texture('images/2_no_clouds_4k.jpg'),\n        bumpMap: Loaders.Texture('images/earthbump.png'),\n        bumpScale: 0.3,\n        // normalMap: Loaders.Texture('images/earth_normal.png'),\n        // normalScale: new THREE.Vector2(0.3,0.3),\n        specularMap: Loaders.Texture('images/water_4k.png'),\n        specular: new THREE.Color('grey'),\n        // wireframe: true\n      })\n    );\n    this.add(this.globeMesh);\n    this.globeMesh.rotation.x = Math.PI/2;\n\n\n    this.globeMeshSatellite = new THREE.Mesh(\n      new THREE.SphereGeometry(10, 50, 50),\n      new THREE.MeshBasicMaterial({\n        map: this.renderTarget\n      })\n    );\n    this.add(this.globeMeshSatellite);\n    this.globeMeshSatellite.rotation.x = Math.PI/2;\n\n\n    this.outlineMesh = new THREE.Mesh(\n      new THREE.SphereGeometry(10.1, 50, 50),\n      new THREE.MeshBasicMaterial({\n        // map: Loaders.Texture('images/yes.png'),\n        alphaMap: Loaders.Texture('images/edge_alpha.png'),\n        transparent: true\n      })\n    );\n    this.add(this.outlineMesh);\n    this.outlineMesh.rotation.x = Math.PI/2;\n\n\n\n    this.neuralMesh = new THREE.Mesh(\n      new THREE.SphereGeometry(10.1, 50, 50),\n      new THREE.MeshBasicMaterial({\n        map: Loaders.Texture('images/neural.png'),\n        opacity: 0.5,\n        transparent: true\n      })\n    );\n    this.add(this.neuralMesh);\n    this.neuralMesh.rotation.x = Math.PI/2;\n\n    this.neuralImg = new Image();\n    this.neuralImg.src = 'images/neural.png';\n    this.neuralImg.onload = () => {\n      var canvas = document.createElement('canvas');\n      canvas.width = this.neuralImg.width;\n      canvas.height = this.neuralImg.height;\n      canvas.getContext('2d').drawImage(this.neuralImg, 0, 0, this.neuralImg.width, this.neuralImg.height);\n      this.neuralCanvas = canvas;\n    };\n\n    this.hovering = false;\n\n\n    this.cloudMesh = new THREE.Mesh(\n\n      new THREE.SphereGeometry(10.1, 50, 50),\n      new THREE.MeshBasicMaterial({\n        map: Loaders.Texture('images/Earth-clouds-1.png'),\n        transparent: true\n      })\n\n    );\n    this.add(this.cloudMesh);\n\n    this.cloudMesh.rotation.x = Math.PI/2;\n    this.beacons = [];\n    this.current = \"standard\";\n\n    // todo: destroy these event listeners...\n\n    window.addEventListener( 'click', (e) => {\n      if (e.target.id == \"earth\") {\n        if (this.lastIntersect) {\n          this.lastIntersect.object.parent.parent.onClick();\n        }\n        e.preventDefault();\n      }\n    });\n\n    controls.addEventListener('change', () => {\n      if (controls.locking) {\n        return;\n      }\n\n      leftSide.className = \"inside\";\n      rightSide.className = \"inside\";\n      biggieSmalls.className = \"inside\";\n\n      var tweet = this.showingInfo;\n      this.showingInfo = false;\n      if (tweet) {\n\n        var children = tweet.tweetEle.parentNode.childNodes;\n        for (var i in children) {\n          var child = children[i];\n          if (child.classList && child.classList.contains && child.classList.contains(\"popupDisplay\") > 0) {\n            child.overrideOpacity = false;\n          }\n        }\n        tweet.beacon.mesh.material.opacity = 0.5;\n\n      }\n    });\n\n    closeButton.addEventListener('click', () => {\n      leftSide.className = \"inside\";\n      rightSide.className = \"inside\";\n      biggieSmalls.className = \"inside\";\n\n      var tweet = this.showingInfo;\n      this.showingInfo = false;\n      if (tweet) {\n        tweet.stopHover();\n      }\n    });\n\n    navigator.geolocation.getCurrentPosition((geo) => {\n      var currentLocation = new CurrentLocation;\n\n      currentLocation.position.copy(this.latLongAltToPoint(geo.coords.latitude, geo.coords.longitude, 10));\n      this.add(currentLocation);\n      console.log(geo.coords);\n\n      this.currentLocation = currentLocation;\n    });\n\n  }\n\n  addEvent(event) {\n    var tweet = new Tweet(event);\n    var geo = event.geometries[0];\n\n    var pos;\n    if (geo.type == \"Point\") {\n      pos = event.geometries[0].coordinates;\n    } else {\n      pos = event.geometries[0].coordinates[0][0];\n    }\n    event.coords = {lat: pos[1], long: pos[0]};\n\n    tweet.position.copy(this.latLongAltToPoint(pos[1],pos[0], 10));\n    this.add(tweet);\n\n    this.beacons.push(tweet);\n  }\n\n  doubleClick(event) {\n\n    if (this.globeIntersect) {\n        // camera.position.copy( lol );\n\n        var pt = this.globeIntersect.point.clone()\n\n        // console.log(pt);\n        // console.log(pt.length());\n        // console.log(camera.position.length());\n\n        pt.divideScalar(pt.length());\n        pt.multiplyScalar(camera.position.length());\n\n        // console.log(pt);\n\n        this.goal = pt;\n        this.isGoing = true;\n\n        controls.enabled = false;\n        // controls.locking = true;\n        event.preventDefault();\n    }\n  }\n\n  update() {\n    // var i = 0;\n    // for (var coord of this.positions) {\n    //   var pos = this.latLongAltToPoint(coord[0], coord[1], coord[2]);\n\n    //   this.cubes[i].position.copy(pos);\n    //   i++;\n\n    // }\n    // console.log(\"yo\")\n\n\n    if (this.isGoing) {\n      camera.position.lerp(this.goal, 0.1);\n      if ( camera.position.distanceTo(this.goal) < 0.1 ) {\n        this.isGoing = false;\n        controls.enabled = true;\n      }\n    }\n\n    if (this.current == \"standard\") {\n      this.globeMesh.visible = true;\n      this.globeMeshSatellite.visible = false;\n      this.outlineMesh.visible = false;\n      this.cloudMesh.visible = true;\n      this.neuralMesh.visible = false;\n    } else if (this.current == \"neural\") {\n      this.globeMesh.visible = true;\n      this.globeMeshSatellite.visible = false;\n      this.outlineMesh.visible = false;\n      this.cloudMesh.visible = false;\n      this.neuralMesh.visible = true;\n    } else {\n      this.globeMesh.visible = false;\n      this.globeMeshSatellite.visible = true;\n      this.outlineMesh.visible = true;\n      this.cloudMesh.visible = false;\n      this.neuralMesh.visible = false;\n    }\n\n    if (this.current == \"neural\") {\n      for (var beacon of this.beacons) {\n        beacon.visible = false;\n      }\n    } else {\n      for (var beacon of this.beacons) {\n        beacon.visible = true;\n      }\n    }\n\n    raycaster.setFromCamera( mouse, camera ); \n\n    if (this.hovering) {\n      misterWorldWide.style.display = 'none';\n    }\n\n    if (onCanvas) {\n      // calculate objects intersecting the picking ray\n      var mesh = [];\n\n      if (this.current != \"neural\") {\n        for (var i in this.beacons) {\n          mesh.push(this.beacons[i].beacon.mesh);\n        }\n      }\n\n      mesh.push(this.globeMesh);\n\n      if (this.currentLocation) {\n        mesh.push(this.currentLocation.beacon.mesh);\n      }\n\n      var olVis = this.globeMesh.visible;\n      this.globeMesh.visible = true;\n      var intersects = raycaster.intersectObjects( mesh );\n      this.globeMesh.visible = olVis;\n\n      this.globeIntersect = null;\n\n      if (intersects[0] && intersects[0].object != this.globeMesh) {\n\n        if (this.lastIntersect && intersects[0].object != this.lastIntersect.object) {\n          this.lastIntersect.object.parent.parent.stopHover();\n        };\n\n        if (intersects[0] && (!this.lastIntersect || intersects[0].object != this.lastIntersect.object)) {\n          intersects[0].object.parent.parent.startHover();\n        }\n        this.lastIntersect = intersects[0];\n\n        misterWorldWide.style.display = 'none';\n\n      } else {\n        if (this.lastIntersect) {\n          this.lastIntersect.object.parent.parent.stopHover();\n        }\n        this.lastIntersect = null;\n\n        if (intersects[0] && intersects[0].object == this.globeMesh) {\n          this.globeIntersect = intersects[0];\n        }\n\n        // Mouse if over the globe during neural mode\n        if (!this.showingInfo && this.current == \"neural\" && intersects[0] && intersects[0].object == this.globeMesh) {\n\n          var point = this.worldToLocal(intersects[0].point.clone());\n          var rho = point.length();\n          var coords = this.pointToLongLat(point.x, point.y, point.z, rho);\n          if (coords.lat < -90) {\n            coords.lat += 360;\n          }\n\n          // Display data about where the user is hovering\n          var pos2D = this.latLongToXY(coords.lat, coords.long, 1026, 1026);\n          var pixelData = this.neuralCanvas.getContext('2d').getImageData(pos2D.x, pos2D.y, 1, 1).data;\n\n          var category = CategoryColors.getCategoryFromColor(pixelData[0], pixelData[1], pixelData[2]);\n          misterWorldWide.textContent = category;\n          misterWorldWide.style.display = 'inline-block';\n\n        } else {\n          misterWorldWide.style.display = 'none';\n        }\n      }\n    }\n\n    // Cloud rotation and opacity\n    this.cloudMesh.rotation.y += deltaTime/10000;\n\n    var opacity = camera.position.length() / 15 - 1;\n\n    if (opacity < 0) {\n      opacity = 0;\n    }\n\n    if (opacity > 1) {\n      opacity = 1;\n    }\n\n    this.cloudMesh.material.opacity = opacity;\n  }\n\n  sinTest() {\n    return (Math.sin((new Date()).getTime()/100)+1)/2;\n  }\n\n  latLongToXY(latitude, longitude, width, height) {\n    var x = (longitude+180)/360*width;\n    var y = (-latitude+90)/180*height;\n\n    return {x: x, y: y};\n  }\n\n  pointToLongLat(x, y, z, rho) {\n    var phi = Math.asin(z / rho);\n    var theta = Math.atan2(y, x);\n\n    var lat = phi / (Math.PI/180);\n    var long = (theta - Math.PI) / (Math.PI/180) + 180;\n\n    return {lat: lat, long: long};\n  }\n\n  latLongAltToPoint(lat, long, rho) {\n    var phi = lat * Math.PI/180;// + this.sinTest()*Math.PI/2;\n    // var phi = long * Math.PI/180;\n    var theta = long * Math.PI/180 + Math.PI;\n    var x = Math.cos(phi) * Math.cos(theta) * -rho;\n    var y = Math.cos(phi) * Math.sin(theta) * -rho;\n    var z = Math.sin(phi) * rho;\n    return new THREE.Vector3(x, y, z);\n  }\n}\n"]}